<div class="row">
    <div ng-controller="FilterController" class="col-lg-3">
        <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-tabs">
                <div ng-repeat="tab in groupedData" class="filter-tab">

                    <div class="filter-tab-name" ng-click="filterTabNameClicked(tab.tabName); $event.stopPropagation()"
                         ng-class="{ active: (tab.tabName == activeTabName)}">
                        {{tab.tabName}}
                    </div>

                </div>
            </div>
            <div ng-repeat="tab in groupedData" class="filter-fields">
                <div ng-show="tab.tabName == activeTabName" style="text-align: center">
                    <div ng-repeat="filter in tab.items track by $index" class="filter"
                         ng-class="{ inactive: filter.inactive }">
                        <div class="filter-name">
                            {{filter.filterName}}
                            <label>
                                Inactive
                                <input type="checkbox" name="inactive" ng-model="filter.inactive">
                            </label>
                        </div>
                        <div ng-repeat="field in filter.items track by $index">
                            <div class="filter-field">
                                <div ng-switch="field.relation">
                                    <div ng-switch-when="=">
                                        <p>{{getColumnName(field.variant_column_id)}} equals</p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select data-ng-model="field.value"
                                                    ng-options="o as o for o in field.options"></select>
                                        </div>

                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                    <div ng-switch-when=">=">
                                        <p>{{getColumnName(field.variant_column_id)}} greater than</p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select data-ng-model="field.value"
                                                    ng-options="o  as o for o in field.options"></select>
                                        </div>
                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                    <div ng-switch-when=">">
                                        <p>{{getColumnName(field.variant_column_id)}} greater</p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select data-ng-model="field.value"
                                                    ng-options="o  as o for o in field.options"></select>
                                        </div>
                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                    <div ng-switch-when="<=">
                                        <p>{{getColumnName(field.variant_column_id)}} less than</p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select data-ng-model="field.value"
                                                    ng-options="o  as o for o in field.options"></select>
                                        </div>
                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                    <div ng-switch-when="<">
                                        <p>{{getColumnName(field.variant_column_id)}} less</p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select ng-model="field.value" ng-options="o  as o for o in field.options"></select>
                                        </div>
                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                    <div ng-switch-when="contains">
                                        <p>{{getColumnName(field.variant_column_id)}} contains ( comma separated
                                            values) </p>
                                        <div ng-if="(field.options) && field.options.length > 0">
                                            <select ng-model="field.value" ng-options="o  as o for o in field.options"></select>
                                        </div>
                                        <div ng-if="!(field.options) || field.options.length === 0">
                                            <input type="text" ng-model="field.value">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-if="filter.countValue">
                            This selection reduce list length to {{filter.countValue}}
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary btn-sm"
                            ng-click="filter(tab)">Filter
                    </button>
                    <button type="button" class="btn btn-primary btn-sm"
                            ng-click="count(tab)">Count
                    </button>
                    <button type="button" class="btn btn-primary btn-sm"
                            ng-click="saveUserFields(tab)">Save
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div ng-controller="TranscriptsTableController" class="col-lg-9 transcript-table">
        <div class="table-wrapper">
                   <table class="table table-striped">
                       <thead>
                       <tr>
                           <th ng-repeat="header in userColumnsList | orderBy: 'column_order' track by header.column_order">
                               {{header.fe_name}}

                           </th>
                       </tr>
                       <tr>
                           <th ng-repeat="header in userColumnsList | orderBy: 'column_order' track by header.column_order">
                               <div class="search">
                                   <div class="glyphicon glyphicon-search"></div>
                                   <input ng-model="search[header.column_name]"/>
                               </div>
                           </th>
                       </tr>
                       </thead>
                       <tbody>
                       <tr ng-repeat="transcript in transcriptData | limitTo : tableLimit : tableBegin | filter : search track by $index">
                           <td ng-repeat="header in userColumnsList | orderBy: 'column_order' track by header.column_order">
                               {{transcript[header.fe_name.toString()]}}
                           </td>
                       </tr>
                       </tbody>
                   </table>
               </div>
               <div class="transcript-table-pagination">
                   <ul uib-pagination total-items="transcriptData.length" ng-model="currentPage" max-size="10" items-per-page="tableLimit"
                       class="pagination-sm" boundary-link-numbers="true" rotate="false" ng-change="pageChanged()"></ul>
               </div>

        <div class="spinner-background" ng-show="showSpinner">
            <div class="sk-cube-grid">
                <div class="sk-cube sk-cube1"></div>
                <div class="sk-cube sk-cube2"></div>
                <div class="sk-cube sk-cube3"></div>
                <div class="sk-cube sk-cube4"></div>
                <div class="sk-cube sk-cube5"></div>
                <div class="sk-cube sk-cube6"></div>
                <div class="sk-cube sk-cube7"></div>
                <div class="sk-cube sk-cube8"></div>
                <div class="sk-cube sk-cube9"></div>
            </div>
        </div>
    </div>
</div>

